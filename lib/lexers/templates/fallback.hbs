          if (isMatched) {
            results.push(input.slice(lastMatch, i))
          }

          currentState = {{initialState}}

          {{#if initialStateIsAccepted}}
          isMatched = true
          {{else}}
          isMatched = false
          {{/if}}

          {{#if isInitialState}}
          lastMatch = i + 1
          {{else}}
          lastMatch = i
          i = i - 1
          {{/if}}
